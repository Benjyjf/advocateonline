{% extends "blog_base.html" %}
{% load staticfiles %}


{% block content %}
<div class="container">
    {% if name %}
    <h1 class="header">{{ name }}</h1>
    {% endif %}
    <div class="wrapper blog">
        {% for post in posts_data %}

        <div class="item">
            
            <a class="underline" href="{{post.get_absolute_url}}"><h3>{{post.title}}</h3></a>

            <h4>By {% for author in post.authors.all %}
                {% if forloop.first %}{% else %}
                    {% if forloop.last %} and {% else %}<span style="margin-left:-5px;">,</span>{% endif %}
                {% endif %}<a class="no-decoration" href="{{author.get_absolute_url}}">{{author}}</a>
            {% endfor %}
            </h4>
            <!-- How to check if image exists:
            http://stackoverflow.com/questions/6637168/python-django-templates-and-testing-if-a-variable-is-null-or-empty-string?rq=1
            http://stackoverflow.com/questions/12507281/determine-empty-template-variable-in-django -->
            {% if post.first_image_id %}
            <figure style="margin-bottom: 10px;"><a href="{{post.get_absolute_url}}" class="underline"><img class='img-responsive' style="margin: 0 auto;" src="{{post.first_image.path}}"></a></figure>
            {% endif %}
            <p>{{post.teaser}}</p>
            <a style="text-transform: uppercase;" href="{{post.get_absolute_url}}"><h4>Read More</h4></a>
        </div>

    {% endfor %}
</div>
</div>
    <div class="text-center">
        <div class="pagination text-center">
            <span class="step-links">
                {% if posts.has_previous %}
                    <a href="?page={{ posts.previous_page_number }}">previous</a>
                {% endif %}

                <span class="current">
                    Page {{ posts.number }} of {{ posts.paginator.num_pages }}.
                </span>

                {% if posts.has_next %}
                    <a href="?page={{ posts.next_page_number }}">next</a>
                {% endif %}
            </span>
        </div>
    </div>
    
    </div>

</div>
{% endblock %}